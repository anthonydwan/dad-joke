import requests
import random

url =  'https://icanhazdadjoke.com/search'

# def pull_joke():
#   user_input = input("Gimme a topic: ")
#   response = requests.get(url, headers={'Accept':'Application/json'}, params={"term": user_input}).json()
#   return response

def retry():
  again = input('You do want to try again? Enter [Y]/[N]')
  if again == 'Y':
    dad_joker()
  elif again == 'N':
    print('Cya!')
  else:
    print('Wrong input!')
    retry()

def dad_joker():
  """a function for fetching dad joke"""
  print('Let me tell you a dad-joke.')

  user_input = input("Gimme a topic: ")
  response = requests.get(url, headers={'Accept':'Application/json'}, params={"term": user_input}).json()
  return response

  results = response['results']
  total_jokes = response['total_jokes']

  def retry():
    again = input('You do want to try again? Enter [Y]/[N]')
    if again == 'Y':
      dad_joker()
    elif again == 'N':
      print('Cya!')
    else:
      print('Wrong input!')
      retry()

  if total_jokes==0:
    print(f"There's nothing on the topic '{user_input}'!")
    retry()

  elif total_jokes==1:
    print(f"There's one joke on the topic '{user_input}'. Let me tell you:")
    print(results[0]['joke'])

  else:
    print(f"There are {total_jokes} jokes on the topic '{user_input}'. Let me pick a good one for you:")
    print(results[random.randrange(0,total_jokes)]['joke'])

    joke2 = input("do you want another? Enter [Y]/[N]")
    if joke2 == 'Y':
      cont = (f"on '{user_input}' again? Enter [Y]/[N]")
      if cont == 'Y':
        print(results[random.randrange(0,total_jokes)]['joke'])
      else:
        pull_joke()
